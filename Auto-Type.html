<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- Copyright (C) 2022 Richard Stallman and Free Software Foundation, Inc.

(The work of Trevis Rothwell and Nelson Beebe has been assigned to the FSF.)

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual." -->
<title>Auto Type (GNU C Language Manual)</title>

<meta name="description" content="Auto Type (GNU C Language Manual)">
<meta name="keywords" content="Auto Type (GNU C Language Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Symbol-Index.html" rel="index" title="Symbol Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Variables.html" rel="up" title="Variables">
<link href="Local-Variables.html" rel="next" title="Local Variables">
<link href="Designated-Inits.html" rel="prev" title="Designated Inits">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<div class="section" id="Auto-Type">
<div class="header">
<p>
Next: <a href="Local-Variables.html" accesskey="n" rel="next">Local Variables</a>, Previous: <a href="Designated-Inits.html" accesskey="p" rel="prev">Designated Initializers</a>, Up: <a href="Variables.html" accesskey="u" rel="up">Variables</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Symbol-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Referring-to-a-Type-with-_005f_005fauto_005ftype"></span><h3 class="section">20.4 Referring to a Type with <code>__auto_type</code></h3>
<span id="index-_005f_005fauto_005ftype"></span>
<span id="index-typeof"></span>
<span id="index-macros_002c-types-of-arguments"></span>

<p>You can declare a variable copying the type from
the initializer by using <code>__auto_type</code> instead of a particular type.
Here&rsquo;s an example:
</p>
<div class="example">
<pre class="example">#define max(a,b) \
  ({ __auto_type _a = (a); \
      __auto_type _b = (b); \
    _a &gt; _b ? _a : _b })
</pre></div>

<p>This defines <code>_a</code> to be of the same type as <code>a</code>, and
<code>_b</code> to be of the same type as <code>b</code>.  This is a useful thing
to do in a macro that ought to be able to handle any type of data
(see <a href="Macros-and-Auto-Type.html">Using <code>__auto_type</code> for Local Variables</a>).
</p>
<p>The original GNU C method for obtaining the type of a value is to use
<code>typeof</code>, which takes as an argument either a value or the name of
a type.  The previous example could also be written as:
</p>
<div class="example">
<pre class="example">#define max(a,b) \
  ({ typeof(a) _a = (a); \
      typeof(b) _b = (b); \
    _a &gt; _b ? _a : _b })
</pre></div>

<p><code>typeof</code> is more flexible than <code>__auto_type</code>; however, the
principal use case for <code>typeof</code> is in variable declarations with
initialization, which is exactly what <code>__auto_type</code> handles.
</p>
</div>



</body>
</html>
