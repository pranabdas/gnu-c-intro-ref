<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- Copyright (C) 2022 Richard Stallman and Free Software Foundation, Inc.

(The work of Trevis Rothwell and Nelson Beebe has been assigned to the FSF.)

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual." -->
<title>Exact Floating Constants (GNU C Language Manual)</title>

<meta name="description" content="Exact Floating Constants (GNU C Language Manual)">
<meta name="keywords" content="Exact Floating Constants (GNU C Language Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Symbol-Index.html" rel="index" title="Symbol Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Floating-Point-in-Depth.html" rel="up" title="Floating Point in Depth">
<link href="Handling-Infinity.html" rel="next" title="Handling Infinity">
<link href="Error-Recovery.html" rel="prev" title="Error Recovery">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<div class="section" id="Exact-Floating-Constants">
<div class="header">
<p>
Next: <a href="Handling-Infinity.html" accesskey="n" rel="next">Handling Infinity</a>, Previous: <a href="Error-Recovery.html" accesskey="p" rel="prev">Error Recovery</a>, Up: <a href="Floating-Point-in-Depth.html" accesskey="u" rel="up">Floating Point in Depth</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Symbol-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Exact-Floating_002dPoint-Constants"></span><h3 class="section">28.12 Exact Floating-Point Constants</h3>
<span id="index-exact-specification-of-floating_002dpoint-constants"></span>
<span id="index-floating_002dpoint-constants_002c-exact-specification-of"></span>

<p>One of the frustrations that numerical programmers have suffered
with since the dawn of digital computers is the inability to
precisely specify numbers in their programs.  On the early
decimal machines, that was not an issue: you could write a
constant <code>1e-30</code> and be confident of that exact value
being used in floating-point operations.  However, when the
hardware works in a base other than 10, then human-specified
numbers have to be converted to that base, and then converted
back again at output time.  The two base conversions are rarely
exact, and unwanted rounding errors are introduced.
</p>
<span id="index-hexadecimal-floating_002dpoint-constants"></span>
<p>As computers usually represent numbers in a base other than 10,
numbers often must be converted to and from different bases, and
rounding errors can occur during conversion.  This problem is solved
in C using hexademical floating-point constants.  For example,
<code>+0x1.fffffcp-1</code> is the number that is the IEEE 754 32-bit value
closest to, but below, <code>1.0</code>. The significand is represented as a
hexadecimal fraction, and the <em>power of two</em> is written in
decimal following the exponent letter <code>p</code> (the traditional
exponent letter <code>e</code> is not possible, because it is a hexadecimal
digit).
</p>
<p>In <code>printf</code> and <code>scanf</code> and related functions, you can use
the &lsquo;<samp>%a</samp>&rsquo; and &lsquo;<samp>%A</samp>&rsquo; format specifiers for writing and reading
hexadecimal floating-point values.  &lsquo;<samp>%a</samp>&rsquo; writes them with lower
case letters and &lsquo;<samp>%A</samp>&rsquo; writes them with upper case letters.  For
instance, this code reproduces our sample number:
</p>
<div class="example">
<pre class="example">printf (&quot;%a\n&quot;, 1.0 - pow (2.0, -23));
    -| 0x1.fffffcp-1
</pre></div>

<p>The <code>strtod</code> family was similarly extended to recognize
numbers in that new format.
</p>
<p>If you want to ensure exact data representation for transfer of
floating-point numbers between C programs on different
computers, then hexadecimal constants are an optimum choice.
</p>

</div>
<hr>
<div class="header">
<p>
Next: <a href="Handling-Infinity.html">Handling Infinity</a>, Previous: <a href="Error-Recovery.html">Error Recovery</a>, Up: <a href="Floating-Point-in-Depth.html">Floating Point in Depth</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Symbol-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
